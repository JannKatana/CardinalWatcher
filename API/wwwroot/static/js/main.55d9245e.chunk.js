(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{296:function(e,t,n){},504:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return De}));var r=n(0),a=n(42),c=n.n(a),o=(n(292),n(293),n(294),n(295),n(296),n(520)),i=n(115),s=n(18),l=n(25),u=n(50),d=n(36),j=n(14),b=n.n(j),h=n(37),m=n(16),O=n(19),p=n(13),x=n(20),f=n.n(x);f.a.defaults.baseURL="/api",f.a.interceptors.request.use((function(e){var t=I.commonStore.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),f.a.interceptors.response.use(function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,n=t.data,r=t.status,a=t.config;switch(r){case 400:if("string"===typeof n&&i.b.error(n),"get"===a.method&&n.errors.hasOwnProperty("id")&&De.push("/not-found"),n.errors){var c=[];for(var o in n.errors)n.errors[o]&&c.push(n.errors[o]);throw c.flat()}break;case 401:i.b.error("unauthorized");break;case 404:De.push("/not-found");break;case 500:I.commonStore.setServerError(n),De.push("/server-error");break;default:i.b.error("Unexpected Error")}return Promise.reject(e)}));var g=function(e){return e.data},v=function(e){return f.a.get(e).then(g)},y={Attendances:{list:function(){return v("/attendances")},details:function(e){return v("/attendances/".concat(e))},create:function(e){return f.a.post("/attendances",e)},update:function(e){return f.a.put("/attendances/".concat(e.id),e)},delete:function(e){return f.a.delete("/attendances/".concat(e))},timeIO:function(e){return f.a.post("/attendances/timeIO",e)},filter:function(e){return f.a.post("/attendances/filter",e)}},Account:{current:function(){return v("/account")},login:function(e){return f.a.post("/account/login",e)},register:function(e){return f.a.post("/account/register",e)},resetPassword:function(e){return f.a.post("/account/reset-password",e)},changePassword:function(e){return f.a.post("/account/change-password",e)}}},w=function(){function e(){var t=this;Object(m.a)(this,e),this.attendanceRegistry=new Map,this.selectedAttendance=void 0,this.editMode=!1,this.loading=!1,this.loadingInitial=!1,this.getAttendanceByPayrollPeriod=function(e){return e?Array.from(t.attendanceRegistry.values()).filter((function(e){return e.timeIn.getDate()>15})).sort((function(e,t){return e.timeIn.getTime()-t.timeIn.getTime()})):Array.from(t.attendanceRegistry.values()).filter((function(e){return e.timeIn.getDate()<16})).sort((function(e,t){return e.timeIn.getTime()-t.timeIn.getTime()}))},this.loadAttendances=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingInitial=!0,e.prev=1,e.next=4,y.Attendances.list();case 4:e.sent.forEach((function(e){t.setAttendance(e)})),t.setLoadingInitial(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.setLoadingInitial(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),this.loadAttendance=function(){var e=Object(h.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.getAttendance(n))){e.next=6;break}return t.selectedAttendance=r,e.abrupt("return",r);case 6:return t.loadingInitial=!0,e.prev=7,e.next=10,y.Attendances.details(n);case 10:return r=e.sent,t.setAttendance(r),Object(p.h)((function(){t.selectedAttendance=r})),t.setLoadingInitial(!1),e.abrupt("return",r);case 17:e.prev=17,e.t0=e.catch(7),console.log(e.t0),t.setLoadingInitial(!1);case 21:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}(),this.setAttendance=function(e){e.timeIn=new Date(e.timeIn),null!==e.timeOut&&(e.timeOut=new Date(e.timeOut)),t.attendanceRegistry.set(e.id,e)},this.getAttendance=function(e){return t.attendanceRegistry.get(e)},this.convertDateToUtc=function(e){var t=(new Date).getTimezoneOffset(),n=new Date(e.toISOString());return n.setMinutes(e.getMinutes()-t),n},this.setLoadingInitial=function(e){t.loadingInitial=e},this.createAttendance=function(){var e=Object(h.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,r=Object(d.a)(Object(d.a)({},n),{},{timeIn:t.convertDateToUtc(n.timeIn),timeOut:n.timeOut?t.convertDateToUtc(n.timeOut):null}),e.prev=2,e.next=5,y.Attendances.create(r);case 5:Object(p.h)((function(){t.attendanceRegistry.set(n.id,n),t.selectedAttendance=n,t.editMode=!1,t.loading=!1})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0),Object(p.h)((function(){t.loading=!1}));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),this.updateAttendance=function(){var e=Object(h.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,r=Object(d.a)(Object(d.a)({},n),{},{timeIn:t.convertDateToUtc(n.timeIn),timeOut:n.timeOut?t.convertDateToUtc(n.timeOut):null}),e.prev=2,e.next=5,y.Attendances.update(r);case 5:Object(p.h)((function(){t.attendanceRegistry.set(n.id,n),t.selectedAttendance=n,t.editMode=!1,t.loading=!1})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0),Object(p.h)((function(){t.loading=!1}));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteAttendance=function(){var e=Object(h.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,y.Attendances.delete(n);case 4:Object(p.h)((function(){t.attendanceRegistry.delete(n),t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(p.h)((function(){t.selectedAttendance=void 0,t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.timeIO=function(){var e=Object(h.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,y.Attendances.timeIO(n);case 4:Object(p.h)((function(){var e;t.attendanceRegistry.set(n.id,n),t.selectedAttendance=n,I.userStore.user.isPresent=!(null===(e=I.userStore.user)||void 0===e?void 0:e.isPresent),t.editMode=!1,t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(p.h)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.filterAttendances=function(){var e=Object(h.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,console.log(t.attendanceRegistry),t.attendanceRegistry.clear(),console.log(t.attendanceRegistry),e.next=7,y.Attendances.filter(n);case 7:e.sent.data.forEach((function(e){t.setAttendance(e),t.loading=!1})),console.log(t.attendanceRegistry),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),t.loading=!1;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),Object(p.d)(this)}return Object(O.a)(e,[{key:"attendancesByDateTimeAndEmployee",get:function(){return Array.from(this.attendanceRegistry.values()).sort((function(e,t){return t.timeIn.getTime()-e.timeIn.getTime()})).sort((function(e,t){var n,r;return null===(n=e.profile)||void 0===n?void 0:n.displayName.localeCompare(null===(r=t.profile)||void 0===r?void 0:r.displayName)}))}},{key:"groupAttendances",get:function(){return Object.entries(this.attendancesByDateTimeAndEmployee.reduce((function(e,t){var n,r=null===(n=t.profile)||void 0===n?void 0:n.displayName;return e[r]=e[r]?[].concat(Object(u.a)(e[r]),[t]):[t],e}),{}))}}]),e}(),S=function(){function e(){var t=this;Object(m.a)(this,e),this.user=null,this.login=function(){var e=Object(h.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Account.login(n);case 3:r=e.sent,I.commonStore.setToken(r.data.token),Object(p.h)((function(){return t.user=r.data})),De.push("/attendances"),I.modalStore.closeModal(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){I.commonStore.setToken(null),I.attendanceStore.attendanceRegistry.clear(),window.localStorage.removeItem("jwt"),t.user=null,De.push("/")},this.getUser=Object(h.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Account.current();case 3:n=e.sent,Object(p.h)((function(){return t.user=n})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.register=function(){var e=Object(h.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Account.register(n);case 3:r=e.sent,I.commonStore.setToken(r.data.token),Object(p.h)((function(){return t.user=r.data})),De.push("/attendances"),I.modalStore.closeModal(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.resetPassword=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Account.resetPassword(t);case 3:n=e.sent,Object(p.h)((function(){return console.log(n)})),I.modalStore.closeModal(),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),this.changePassword=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Account.changePassword(t);case 3:n=e.sent,Object(p.h)((function(){return console.log(n)})),De.push("/attendances"),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Object(p.d)(this)}return Object(O.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),I={attendanceStore:new w,commonStore:new function e(){var t=this;Object(m.a)(this,e),this.error=null,this.token=window.localStorage.getItem("jwt"),this.appLoaded=!1,this.setServerError=function(e){t.error=e},this.setToken=function(e){t.token=e},this.setAppLoaded=function(){t.appLoaded=!0},Object(p.d)(this),Object(p.g)((function(){return t.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},userStore:new S,modalStore:new function e(){var t=this;Object(m.a)(this,e),this.modal={open:!1,body:null},this.openModal=function(e){t.modal.open=!0,t.modal.body=e},this.closeModal=function(){t.modal.open=!1,t.modal.body=null},Object(p.d)(this)}},A=Object(r.createContext)(I);function k(){return Object(r.useContext)(A)}var C=n(534),M=n(26),E=n(532),T=n(523),D=n(529),P=n(524),R=n(31),F=n(521),L=n(1);function N(e){var t=e.attendance,n=k(),a=n.attendanceStore,c=n.userStore.user,o=a.deleteAttendance,i=a.loading,s=Object(r.useState)(""),l=Object(M.a)(s,2),u=l[0],d=l[1];return Object(L.jsxs)(P.a.Row,{children:[Object(L.jsx)(P.a.Cell,{children:Object(F.a)(t.timeIn,"dd MMM yyyy, EEEE")}),Object(L.jsx)(P.a.Cell,{textAlign:"center",children:Object(F.a)(t.timeIn,"h:mm:ss aa")}),Object(L.jsx)(P.a.Cell,{textAlign:"center",children:t.timeOut?Object(F.a)(t.timeOut,"dd MMM yyyy, EEEE h:mm:ss aa"):""}),Object(L.jsx)(P.a.Cell,{children:t.accomplishments}),Object(L.jsxs)(P.a.Cell,{textAlign:"center",children:[t.timeIn&&t.timeOut||(null===c||void 0===c?void 0:c.isSuperUser)?Object(L.jsx)(D.a,{as:R.a,to:"attendances/".concat(t.id),icon:"eye",color:"blue"}):Object(L.jsx)(D.a,{as:R.a,to:"/manage/".concat(t.id),color:"red",content:"Time Out"}),(null===c||void 0===c?void 0:c.isSuperUser)&&Object(L.jsx)(D.a,{name:t.id,loading:i&&u===t.id,onClick:function(e){return function(e,t){d(e.currentTarget.name),o(t)}(e,t.id)},icon:"cancel",color:"red",disabled:!0})]})]},t.id)}var B=n(266),U=n.n(B),q=n(267),H=n(17),V=n(38),z=n(518),J=n(131);function G(e){var t=Object(H.d)(e.name),n=Object(M.a)(t,3),r=n[0],a=n[1],c=n[2];return Object(L.jsxs)(V.a,{error:a.touched&&!!a.error,children:[Object(L.jsx)("label",{children:e.label}),Object(L.jsx)(z.a,{options:e.options,value:r.value,onChange:function(e,t){return c.setValue(t.value)},onBlur:function(){return c.setTouched(!0)},placeholder:e.placeholder}),a.touched&&a.error?Object(L.jsx)(J.a,{basic:!0,color:"red",children:a.error}):null]})}var W=Object(s.a)((function(){var e,t=k(),n=t.attendanceStore,a=t.userStore.user,c=n.groupAttendances,o=(new Date).getDate()<15,i=[{text:"".concat(Object(F.a)(new Date,"MMMM")," 1 - 15"),value:0},{text:"".concat(Object(F.a)(new Date,"MMMM")," 16 - ").concat((e=new Date,new Date(e.getFullYear(),e.getMonth()+1,0)).getDate()),value:1}];function s(){return(s=Object(h.a)(b.a.mark((function e(t){var r,c,o,i,s,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,f.a.get("/attendances/download",{responseType:"blob"});case 3:return r=e.sent,c=new q.Workbook,e.next=7,c.xlsx.load(r.data);case 7:return(o=c.getWorksheet("Sheet1")).getCell("B4").value="".concat(null===a||void 0===a?void 0:a.displayName," (").concat(null===a||void 0===a?void 0:a.email,")"),o.getCell("B5").value=null===a||void 0===a?void 0:a.department,o.getCell("B6").value=t.text,i=n.getAttendanceByPayrollPeriod(t.value),s=10,i.map((function(e){o.getCell("A".concat(s)).value=Object(F.a)(e.timeIn,"dd MMM yyyy, EEEE"),o.getCell("B".concat(s)).value=Object(F.a)(e.timeIn,"h:mm:ss aa"),o.getCell("C".concat(s)).value=Object(F.a)(e.timeOut,"dd MMM yyyy, EEEE h:mm:ss aa"),o.getCell("D".concat(s)).value=e.timeOut.getHours()-e.timeIn.getHours(),o.getCell("G".concat(s)).value=e.accomplishments,s+=1})),e.next=16,c.xlsx.writeBuffer();case 16:l=e.sent,U()(l,(null===a||void 0===a?void 0:a.displayName)+" "+t.text+".xlsx");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(L.jsx)(L.Fragment,{children:c.map((function(e){var t=Object(M.a)(e,2),n=t[0],c=t[1];return Object(L.jsxs)(r.Fragment,{children:[Object(L.jsx)(E.a,{sub:!0,color:"red",children:n}),!(null===a||void 0===a?void 0:a.isSuperUser)&&Object(L.jsx)(H.c,{initialValues:{payrollPeriod:o?0:1},onSubmit:function(e){return function(e){return s.apply(this,arguments)}(i[e.payrollPeriod])},children:function(e){var t=e.handleSubmit,n=e.isSubmitting;return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(T.a,{className:"ui form",onSubmit:t,autoComplete:"off",children:Object(L.jsxs)(T.a.Group,{children:[Object(L.jsx)(G,{options:i,placeholder:"Payroll Period",name:"payrollPeriod"}),Object(L.jsx)(D.a,{loading:n,color:"orange",content:"Download",tyep:"submit"})]})})})}}),Object(L.jsxs)(P.a,{celled:!0,fixed:!0,children:[Object(L.jsx)(P.a.Header,{children:Object(L.jsxs)(P.a.Row,{children:[Object(L.jsx)(P.a.HeaderCell,{children:"Day"}),Object(L.jsx)(P.a.HeaderCell,{children:"Time In"}),Object(L.jsx)(P.a.HeaderCell,{children:"Time Out"}),Object(L.jsx)(P.a.HeaderCell,{children:"Accomplishments"}),Object(L.jsx)(P.a.HeaderCell,{})]})}),Object(L.jsx)(P.a.Body,{children:c.map((function(e){return Object(L.jsx)(N,{attendance:e},e.id)}))})]})]},n)}))})})),Y=n(530),K=n(519);function Q(e){var t=e.inverted,n=void 0===t||t,r=e.content,a=void 0===r?"Loading...":r;return Object(L.jsx)(Y.a,{active:!0,inverted:n,children:Object(L.jsx)(K.a,{content:a})})}var X=n(275),Z=n(533);function $(e){var t=Object(H.d)(e.name),n=Object(M.a)(t,2),r=n[0],a=n[1];return Object(L.jsxs)(V.a,{error:a.touched&&!!a.error,children:[Object(L.jsx)("label",{children:e.label}),Object(L.jsx)("input",Object(d.a)(Object(d.a)({},r),e)),a.touched&&a.error?Object(L.jsx)(J.a,{basic:!0,color:"red",children:a.error}):null]})}var _=[{text:"January",value:1},{text:"Febuary",value:2},{text:"March",value:3},{text:"April",value:4},{text:"May",value:5},{text:"June",value:6},{text:"July",value:7},{text:"August",value:8},{text:"September",value:9},{text:"October",value:10},{text:"November",value:11},{text:"December",value:12}],ee=[{text:"2021",value:2021},{text:"2022",value:2022},{text:"2023",value:2023},{text:"2024",value:2024},{text:"2025",value:2025},{text:"2026",value:2026},{text:"2027",value:2027},{text:"2028",value:2028},{text:"2029",value:2029},{text:"2030",value:2030}],te=Object(s.a)((function(){var e=k(),t=e.userStore,n=e.attendanceStore;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Z.a,{vertical:!0,size:"large",style:{width:"100%"},children:[Object(L.jsx)(E.a,{icon:"filter",attached:!0,color:"orange",content:"Filter"}),Object(L.jsx)(H.c,{initialValues:{email:t.user.email,month:(new Date).getMonth()+1,year:(new Date).getFullYear()},onSubmit:function(e){return n.filterAttendances(e)},children:function(e){var n,r=e.handleSubmit,a=e.isSubmitting;return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(H.b,{className:"ui form",onSubmit:r,autoComplete:"off",children:[(null===(n=t.user)||void 0===n?void 0:n.isSuperUser)&&Object(L.jsx)($,{name:"email",placeholder:"Email"}),Object(L.jsx)(G,{options:_,placeholder:"month",name:"month"}),Object(L.jsx)(G,{options:ee,placeholder:"year",name:"year"}),Object(L.jsx)(D.a,{loading:a,color:"orange",content:"Filter",type:"submit",fluid:!0})]})})}})]}),Object(L.jsx)(E.a,{}),Object(L.jsx)(X.a,{})]})})),ne=Object(s.a)((function(){var e=k().attendanceStore,t=e.loadAttendances,n=e.attendanceRegistry;return Object(r.useEffect)((function(){console.log(n.size),0===n.size&&t()}),[t]),e.loadingInitial?Object(L.jsx)(Q,{content:"Loading attendances..."}):Object(L.jsxs)(C.a,{children:[Object(L.jsx)(C.a.Column,{width:"10",children:Object(L.jsx)(W,{})}),Object(L.jsx)(C.a.Column,{width:"6",children:Object(L.jsx)(te,{})})]})})),re=n(526),ae=Object(s.a)((function(){var e=k().attendanceStore,t=e.selectedAttendance,n=e.loadAttendance,a=e.loadingInitial,c=Object(l.h)().id;return Object(r.useEffect)((function(){c&&n(c)}),[c,n]),a||!t?Object(L.jsx)(Q,{}):Object(L.jsxs)(re.a,{fluid:!0,children:[Object(L.jsxs)(re.a.Content,{children:[Object(L.jsx)(re.a.Header,{children:t.profile.displayName}),Object(L.jsx)(re.a.Meta,{children:"Department"}),Object(L.jsx)(re.a.Description,{children:Object(L.jsxs)(P.a,{celled:!0,children:[Object(L.jsx)(P.a.Header,{children:Object(L.jsxs)(P.a.Row,{children:[Object(L.jsx)(P.a.HeaderCell,{children:"Day"}),Object(L.jsx)(P.a.HeaderCell,{children:"In"}),Object(L.jsx)(P.a.HeaderCell,{children:"Out"})]})}),Object(L.jsx)(P.a.Body,{children:Object(L.jsxs)(P.a.Row,{children:[Object(L.jsx)(P.a.Cell,{children:Object(F.a)(t.timeIn,"dd MMM yyyy, EEEE")}),Object(L.jsx)(P.a.Cell,{textAlign:"center",children:Object(F.a)(t.timeIn,"h:mm:ss aa")}),Object(L.jsx)(P.a.Cell,{textAlign:"center",children:t.timeOut?Object(F.a)(t.timeOut,"dd MMM yyyy, EEEE h:mm:ss aa"):""})]})})]})}),Object(L.jsx)("h3",{children:"Accomplishments"}),t.accomplishments]}),Object(L.jsx)(re.a.Content,{extra:!0,children:Object(L.jsxs)(D.a.Group,{widths:"2",children:[Object(L.jsx)(D.a,{as:R.a,to:"/manage/".concat(t.id),basic:!0,color:"blue",content:"Edit"}),Object(L.jsx)(D.a,{as:R.a,to:"/attendances",basic:!0,color:"grey",content:"Cancel"})]})})]})})),ce=n(527),oe=n(40),ie=n(272),se=n.n(ie),le=Object(s.a)((function(e){var t=Object(H.d)(e.name),n=Object(M.a)(t,3),r=n[0],a=n[1],c=n[2],o=k().userStore.user;return Object(L.jsxs)(V.a,{error:a.touched&&!!a.error,children:[Object(L.jsx)(se.a,Object(d.a)(Object(d.a)(Object(d.a)({},r),e),{},{disabled:!(null===o||void 0===o?void 0:o.isSuperUser),selected:r.value&&new Date(r.value)||null,onChange:function(e){return c.setValue(e)}})),a.touched&&a.error?Object(L.jsx)(J.a,{basic:!0,color:"red",children:a.error}):null]})}));function ue(e){var t=Object(H.d)(e.name),n=Object(M.a)(t,2),r=n[0],a=n[1];return Object(L.jsxs)(V.a,{error:a.touched&&!!a.error,children:[Object(L.jsx)("label",{children:e.label}),Object(L.jsx)("textarea",Object(d.a)(Object(d.a)({},r),e)),a.touched&&a.error?Object(L.jsx)(J.a,{basic:!0,color:"red",children:a.error}):null]})}var de=Object(s.a)((function(){var e=Object(l.f)(),t=k().attendanceStore,n=t.createAttendance,a=t.updateAttendance,c=t.timeIO,o=t.loading,i=t.loadAttendance,s=t.loadingInitial,u=Object(l.h)().id,j=Object(r.useState)({id:"",timeIn:new Date,timeOut:null,accomplishments:"",profile:{username:"",displayName:"",image:""}}),b=Object(M.a)(j,2),h=b[0],m=b[1],O=oe.a({timeIn:oe.b().required()});return Object(r.useEffect)((function(){u&&i(u).then((function(e){var t;m({id:e.id,timeIn:e.timeIn,timeOut:null!==(t=e.timeOut)&&void 0!==t?t:null,accomplishments:e.accomplishments,profile:e.profile})}))}),[u,i]),s?Object(L.jsx)(Q,{content:"Loading attendance..."}):Object(L.jsxs)(Z.a,{clearing:!0,children:[Object(L.jsx)(E.a,{as:"h2",children:h.profile.displayName}),Object(L.jsx)(E.a,{content:"Attendance Details",sub:!0,color:"red"}),Object(L.jsx)(H.c,{validationSchema:O,enableReinitialize:!0,initialValues:h,onSubmit:function(t){return function(t){if(t.timeIn&&t.timeOut)if(0===t.id.length){var r=Object(d.a)(Object(d.a)({},t),{},{id:Object(ce.a)()});n(r).then((function(){return e.push("/attendances/".concat(r.id))}))}else a(t).then((function(){return e.push("/attendances/".concat(t.id))}));else 0===t.id.length?t.id=Object(ce.a)():t.timeOut=new Date,c(t).then((function(){return e.push("/attendances/".concat(t.id))}))}(t)},children:function(e){var t=e.handleSubmit,n=e.isValid,r=e.isSubmitting;e.dirty;return Object(L.jsxs)(H.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(L.jsx)("label",{children:"Time In"}),Object(L.jsx)(le,{placeholderText:"Time In",name:"timeIn",timeInputLabel:"Time In:",showTimeInput:!0,dateFormat:"MMMM d, yyyy h:mm aa"}),Object(L.jsx)("label",{children:"Time Out"}),Object(L.jsx)(le,{placeholderText:"Time Out",name:"timeOut",timeInputLabel:"Time Out:",showTimeInput:!0,dateFormat:"MMMM d, yyyy h:mm aa"}),Object(L.jsx)("label",{children:"Accomplishments"}),Object(L.jsx)(ue,{rows:3,placeholder:"Accomplishments",name:"accomplishments"}),Object(L.jsx)(D.a,{disabled:r||!n,loading:o,floated:"right",positive:!0,type:"submit",content:"Submit"}),Object(L.jsx)(D.a,{as:R.a,to:"/attendances",floated:"right",type:"button",content:"Cancel"})]})}})]})})),je=Object(s.a)((function(){var e=k().userStore;return Object(L.jsx)(H.c,{initialValues:{email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.changePassword(t).catch((function(e){return r({error:"Invalid email or password"})}))},validationSchema:oe.a({email:oe.b().required().email(),password:oe.b().required()}),children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors,a=e.isValid,c=e.dirty;return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(H.b,{className:"ui form error",onSubmit:t,autoComplete:"off",children:[Object(L.jsx)($,{name:"email",placeholder:"Email"}),Object(L.jsx)($,{name:"password",placeholder:"Password",type:"password"}),Object(L.jsx)(H.a,{name:"error",render:function(){return Object(L.jsx)(J.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(L.jsx)(D.a,{disabled:!a||!c||n,loading:n,color:"orange",content:"Change Password",type:"submit",fluid:!0})]})})}})})),be=n(276),he=Object(s.a)((function(){var e=k().userStore;return Object(L.jsx)(H.c,{initialValues:{email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.login(t).catch((function(e){return r({error:"Invalid email or password"})}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(E.a,{as:"h2",color:"orange",textAlign:"center",children:[Object(L.jsx)(be.a,{src:"/assets/logo.png"})," Login to your account"]}),Object(L.jsxs)(H.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(L.jsx)($,{name:"email",placeholder:"Email"}),Object(L.jsx)($,{name:"password",placeholder:"Password",type:"password"}),Object(L.jsx)(H.a,{name:"error",render:function(){return Object(L.jsx)(J.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(L.jsx)(D.a,{loading:n,color:"orange",content:"Login",type:"submit",fluid:!0})]}),Object(L.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:Object(L.jsx)("a",{href:"/forgot-password",children:"Forgot password?"})})]})}})})),me=n(528);function Oe(e){var t=e.errors;return Object(L.jsx)(me.a,{error:!0,children:t&&Object(L.jsx)(me.a.List,{children:t.map((function(e,t){return Object(L.jsx)(me.a.Item,{children:e},t)}))})})}var pe=Object(s.a)((function(){var e=k().userStore;return Object(L.jsx)(H.c,{initialValues:{username:"",email:"",password:"",error:null,firstName:"",lastName:"",middleInitial:"",suffix:"",department:""},onSubmit:function(t,n){var r=n.setErrors;return e.register(t).catch((function(e){return r({error:e})}))},validationSchema:oe.a({username:oe.b().required(),email:oe.b().required().email(),password:oe.b().required(),firstName:oe.b().required(),middleInitial:oe.b().required(),lastName:oe.b().required(),department:oe.b().required()}),children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors,a=e.isValid,c=e.dirty;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(E.a,{as:"h2",color:"orange",textAlign:"center",children:[Object(L.jsx)(be.a,{src:"/assets/logo.png"})," Sign up to Cardinal Watcher"]}),Object(L.jsxs)(H.b,{className:"ui form error",onSubmit:t,autoComplete:"off",children:[Object(L.jsx)($,{name:"firstName",placeholder:"First Name"}),Object(L.jsx)($,{name:"middleInitial",placeholder:"Middle Initial"}),Object(L.jsx)($,{name:"lastName",placeholder:"Last Name"}),Object(L.jsx)($,{name:"suffix",placeholder:"Suffix (ex. Jr)"}),Object(L.jsx)($,{name:"department",placeholder:"Department"}),Object(L.jsx)($,{name:"username",placeholder:"Username"}),Object(L.jsx)($,{name:"email",placeholder:"Email"}),Object(L.jsx)($,{name:"password",placeholder:"Password",type:"password"}),Object(L.jsx)(H.a,{name:"error",render:function(){return Object(L.jsx)(Oe,{errors:r.error})}}),Object(L.jsx)(D.a,{disabled:!a||!c||n,loading:n,color:"orange",content:"Register",type:"submit",fluid:!0})]})]})}})})),xe=Object(s.a)((function(){var e,t=k(),n=t.userStore,r=t.modalStore;return Object(L.jsx)(Z.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(L.jsxs)(o.a,{text:!0,children:[Object(L.jsxs)(E.a,{as:"h1",inverted:!0,children:[Object(L.jsx)(be.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Cardinal Watcher"]}),Object(L.jsx)(E.a,{as:"h3",inverted:!0,children:Object(L.jsx)("i",{children:'"It\'s just another time keeping app."'})}),Object(L.jsx)("br",{}),n.isLoggedIn?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(E.a,{as:"h2",inverted:!0,content:"Welcome ".concat(null===(e=n.user)||void 0===e?void 0:e.displayName,"!")}),Object(L.jsx)(D.a,{as:R.a,to:"/attendances",size:"huge",inverted:!0,children:"Go to Attendances"})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(D.a,{onClick:function(){return r.openModal(Object(L.jsx)(he,{}))},size:"huge",inverted:!0,children:"Login!"}),Object(L.jsx)(D.a,{onClick:function(){return r.openModal(Object(L.jsx)(pe,{}))},size:"huge",inverted:!0,children:"Register!"})]})]})})})),fe=n(525),ge=Object(s.a)((function(){var e=k().modalStore;return Object(L.jsx)(fe.a,{open:e.modal.open,onClose:e.closeModal,size:"mini",children:Object(L.jsx)(fe.a.Content,{children:e.modal.body})})})),ve=n(522),ye=n(133),we=Object(s.a)((function(){var e=k().userStore;return Object(L.jsx)(H.c,{initialValues:{email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.resetPassword(t).catch((function(e){return r({error:"Invalid email or password"})}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(E.a,{as:"h2",color:"orange",textAlign:"center",children:[Object(L.jsx)(be.a,{src:"/assets/logo.png"})," Enter email to reset password."]}),Object(L.jsxs)(H.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(L.jsx)($,{name:"email",placeholder:"Email"}),Object(L.jsx)(H.a,{name:"error",render:function(){return Object(L.jsx)(J.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(L.jsx)(D.a,{loading:n,color:"orange",content:"Reset Password",type:"submit",fluid:!0})]})]})}})})),Se=Object(s.a)((function(){var e=k(),t=e.userStore,n=t.user,r=t.logout,a=e.modalStore;return Object(L.jsx)(ve.a,{inverted:!0,fixed:"top",children:Object(L.jsxs)(o.a,{children:[Object(L.jsxs)(ve.a.Item,{as:R.b,to:"/",exact:!0,header:!0,children:[Object(L.jsx)("img",{src:"/assets/logo.png",alt:"logo",style:{marginRight:"10px"}}),"Just Another Timekeeping App"]}),Object(L.jsx)(ve.a.Item,{as:R.b,to:"/attendances",name:"attendances"}),n.isSuperUser&&Object(L.jsx)(ve.a.Item,{as:R.b,to:"/errors",name:"Errors"}),!n.isSuperUser&&!(null===n||void 0===n?void 0:n.isPresent)&&Object(L.jsx)(ve.a.Item,{children:Object(L.jsx)(D.a,{as:R.b,to:"/createAttendance",positive:!0,content:"Create Attendance"})}),n.isSuperUser&&Object(L.jsx)(ve.a.Item,{children:Object(L.jsx)(D.a,{onClick:function(){return a.openModal(Object(L.jsx)(we,{}))},positive:!0,children:"Reset Password"})}),Object(L.jsxs)(ve.a.Item,{position:"right",children:[Object(L.jsx)(be.a,{src:(null===n||void 0===n?void 0:n.image)||"/assets/user.png",avatar:!0,spaced:"right"}),Object(L.jsx)(ye.a,{pointing:"top left",text:null===n||void 0===n?void 0:n.displayName,children:Object(L.jsxs)(ye.a.Menu,{children:[Object(L.jsx)(ye.a.Item,{as:R.a,to:"/change-password",text:"Change Password",icon:"user"}),Object(L.jsx)(ye.a.Item,{onClick:r,text:"Logout",icon:"power"})]})})]})]})})})),Ie=n(120);function Ae(){return Object(L.jsxs)(Z.a,{placeholder:!0,children:[Object(L.jsxs)(E.a,{icon:!0,children:[Object(L.jsx)(Ie.a,{name:"search"}),"Oops - we've looked everywhere and could not find this."]}),Object(L.jsx)(Z.a.Inline,{children:Object(L.jsx)(D.a,{as:R.a,to:"/attendances",primary:!0,children:"Return to attendances page"})})]})}var ke=Object(s.a)((function(){var e,t,n=k().commonStore;return Object(L.jsxs)(o.a,{children:[Object(L.jsx)(E.a,{as:"h1",content:"Server Error"}),Object(L.jsx)(E.a,{sub:!0,as:"h5",color:"red",content:null===(e=n.error)||void 0===e?void 0:e.message}),(null===(t=n.error)||void 0===t?void 0:t.details)&&Object(L.jsxs)(Z.a,{children:[Object(L.jsx)(E.a,{as:"h4",content:"Stack trace",color:"orange"}),Object(L.jsx)("code",{style:{marginTop:"10px"},children:n.error.details})]})]})}));function Ce(){var e=Object(r.useState)(null),t=Object(M.a)(e,2),n=t[0],a=t[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(E.a,{as:"h1",content:"Test Error component"}),Object(L.jsx)(Z.a,{children:Object(L.jsxs)(D.a.Group,{widths:"7",children:[Object(L.jsx)(D.a,{onClick:function(){f.a.get("/apibuggy/not-found").catch((function(e){return console.log(e.response)}))},content:"Not Found",basic:!0,primary:!0}),Object(L.jsx)(D.a,{onClick:function(){f.a.get("/apibuggy/bad-request").catch((function(e){return console.log(e.response)}))},content:"Bad Request",basic:!0,primary:!0}),Object(L.jsx)(D.a,{onClick:function(){f.a.post("/apiattendances",{}).catch((function(e){return a(e)}))},content:"Validation Error",basic:!0,primary:!0}),Object(L.jsx)(D.a,{onClick:function(){f.a.get("/apibuggy/server-error").catch((function(e){return console.log(e.response)}))},content:"Server Error",basic:!0,primary:!0}),Object(L.jsx)(D.a,{onClick:function(){f.a.get("/apibuggy/unauthorised").catch((function(e){return console.log(e.response)}))},content:"Unauthorised",basic:!0,primary:!0}),Object(L.jsx)(D.a,{onClick:function(){f.a.get("/apiattendances/notaguid").catch((function(e){return console.log(e.response)}))},content:"Bad Guid",basic:!0,primary:!0})]})}),n&&Object(L.jsx)(Oe,{errors:n})]})}var Me=Object(s.a)((function(){var e=Object(l.g)(),t=k(),n=t.commonStore,a=t.userStore;return Object(r.useEffect)((function(){n.token?a.getUser().finally((function(){return n.setAppLoaded()})):n.setAppLoaded()}),[n,a]),n.appLoaded?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(i.a,{position:"bottom-right",hideProgressBar:!0}),Object(L.jsx)(ge,{}),Object(L.jsx)(l.a,{exact:!0,path:"/",component:xe}),Object(L.jsx)(l.a,{path:"/(.+)",render:function(){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(Se,{}),Object(L.jsx)(o.a,{style:{marginTop:"7em"},children:Object(L.jsxs)(l.c,{children:[Object(L.jsx)(l.a,{exact:!0,path:"/attendances",component:ne}),Object(L.jsx)(l.a,{exact:!0,path:"/attendances/:id",component:ae}),Object(L.jsx)(l.a,{exact:!0,path:["/createAttendance","/manage/:id"],component:de},e.key),Object(L.jsx)(l.a,{exact:!0,path:"/errors",component:Ce}),Object(L.jsx)(l.a,{exact:!0,path:"/server-error",component:ke}),Object(L.jsx)(l.a,{exact:!0,path:"/login",component:he}),Object(L.jsx)(l.a,{exact:!0,path:"/change-password",component:je}),Object(L.jsx)(l.a,{component:Ae})]})})]})}})]}):Object(L.jsx)(Q,{content:"Loading App..."})})),Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,536)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},Te=n(46),De=Object(Te.a)();c.a.render(Object(L.jsx)(A.Provider,{value:I,children:Object(L.jsx)(l.b,{history:De,children:Object(L.jsx)(Me,{})})}),document.getElementById("root")),Ee()}},[[504,1,2]]]);
//# sourceMappingURL=main.55d9245e.chunk.js.map